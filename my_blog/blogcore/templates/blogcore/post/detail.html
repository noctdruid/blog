{% extends "blogcore/base.html" %}
{% load blogcore_tags %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}

    <div id="postcontainer">

        <!--- Post title, date and topics. --->
        <h2 id="post-title">{{ post.title }}</h2>
        <div class="topics">
            {% for tag in post.tags.all %}
                <a class="topic-rm" href="{% url 'blogcore:post_list_topic' tag.slug %}">
                    <p class="topic">{{ tag.name|upper }}</p>
                </a>
                {% if not forloop.last %}{% endif %}
            {% endfor %}
        </div>

        <div id="datecont">
            <p id="date">Published on {{ post.publish }}</p>
        </div><hr>

        <!--- Post parts and share options. --->
        <p class="introfoot">{{ post.intro }}</p>
        <div id="markdownpost">{{ post.body|markdown }}</div>
        <p class="introfoot">{{ post.footnotes }}</p>
        <p id="share">
            <a href="{% url 'blogcore:post_share' post.slug %}">share</a>
            <b>|</b>
            <a href="#">newsletters</a>
            <b>|</b>
            <a href="{% url 'blogcore:post_feed' %}">feed</a>
        </p><hr>

        <!--- Recommendation and comment section. --->
        <h3 id="hrecommend"><i>Recommended for reading:</i></h3>
        {% for post in recommend %}
            <p>
                <ul>
                    <li><a id="postlink" href="{{ post.get_absolute_url }}">{{ post.title }}</a></li>
                </ul>
            </p>
        {% empty %}
            There are no similar posts.
        {% endfor %}

        {% with comments.count as total_comments %}
            <h3 id="totalcomm"><i>{{ total_comments }} comment{{ total_comments|pluralize }}</i></h3>
        {% endwith %}
        {% for comment in comments %}
            <div class="comment">
                <p class="info">by {{ comment.name }} | {{ comment.created }}</p>
                {{ comment.body|linebreaks }}
            </div>
        {% empty %}
            <p>There are no comments.</p>
        {% endfor %}

        {% include "blogcore/post/includes/comment_form.html" %}

    </div>

{% endblock %}
